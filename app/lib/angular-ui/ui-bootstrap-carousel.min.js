angular.module("ui.bootstrap",["ui.bootstrap.transition","ui.bootstrap.carousel"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(n,e,t){function i(n){for(var e in n)if(void 0!==a.style[e])return n[e]}var r=function(i,a,o){o=o||{};var l=n.defer(),c=r[o.animation?"animationEndEventName":"transitionEndEventName"],u=function(){t.$apply(function(){i.unbind(c,u),l.resolve(i)})};return c&&i.bind(c,u),e(function(){angular.isString(a)?i.addClass(a):angular.isFunction(a)?a(i):angular.isObject(a)&&i.css(a),c||l.resolve(i)}),l.promise.cancel=function(){c&&i.unbind(c,u),l.reject("Transition cancelled")},l.promise},a=document.createElement("trans"),o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},l={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return r.transitionEndEventName=i(o),r.animationEndEventName=i(l),r}]),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition","$q",function(n,e,t){function i(){function t(){a?(n.next(),i()):n.pause()}r&&e.cancel(r);var o=+n.interval;!isNaN(o)&&o>=0&&(r=e(t,o))}var r,a,o=this,l=o.slides=[],c=-1;o.currentSlide=null,o.select=function(r,a){function u(){o.currentSlide&&angular.isString(a)&&!n.noTransition&&r.$element?(r.$element.addClass(a),r.$element[0].offsetWidth=r.$element[0].offsetWidth,angular.forEach(l,function(n){angular.extend(n,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(r,{direction:a,active:!0,entering:!0}),angular.extend(o.currentSlide||{},{direction:a,leaving:!0}),n.$currentTransition=t(r.$element,{}),function(e,t){n.$currentTransition.then(function(){s(e,t)},function(){s(e,t)})}(r,o.currentSlide)):s(r,o.currentSlide),o.currentSlide=r,c=d,i()}function s(e,t){angular.extend(e,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(t||{},{direction:"",active:!1,leaving:!1,entering:!1}),n.$currentTransition=null}var d=l.indexOf(r);void 0===a&&(a=d>c?"next":"prev"),r&&r!==o.currentSlide&&(n.$currentTransition?(n.$currentTransition.cancel(),e(u)):u())},o.indexOfSlide=function(n){return l.indexOf(n)},n.next=function(){var n=(c+1)%l.length;return o.select(l[n],"next")},n.prev=function(){var n=0>c-1?l.length-1:c-1;return o.select(l[n],"prev")},n.select=function(n){o.select(n)},n.isActive=function(n){return o.currentSlide===n},n.slides=function(){return l},n.$watch("interval",i),n.play=function(){a||(a=!0,i())},n.pause=function(){a=!1,r&&e.cancel(r)},o.addSlide=function(e,t){e.$element=t,l.push(e),1===l.length||e.active?(o.select(l[l.length-1]),1==l.length&&n.play()):e.active=!1},o.removeSlide=function(n){var e=l.indexOf(n);l.splice(e,1),l.length>0&&n.active&&(e>=l.length?o.select(l[e-1]):o.select(l[e]))}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"="}}}]).directive("slide",[function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"="},link:function(n,e,t,i){i.addSlide(n,e),n.$on("$destroy",function(){i.removeSlide(n)}),n.$watch("active",function(e){e&&i.select(n)})}}}]);